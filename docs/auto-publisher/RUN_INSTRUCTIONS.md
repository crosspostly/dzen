# Инструкция по запуску Dzen Auto-Publisher

## Подготовка к работе

1. Убедитесь, что у вас установлен Node.js (версия 14 или выше)
2. Установите зависимости:
   ```bash
   npm install
   ```

3. Установите браузер для Playwright:
   ```bash
   npx playwright install chromium
   ```

## Настройка аутентификации

1. Войдите в Дзен через браузер
2. Откройте DevTools (F12)
3. Перейдите во вкладку Application (или Storage)
4. Найдите Cookies для домена `.dzen.ru`
5. Скопируйте куки в файл `config/cookies.json`

## Подготовка контента

1. Создайте или отредактируйте файл `public/feed.xml` с вашими статьями
2. Используйте структуру, показанную в `feed.xml.example` как шаблон

## Запуск публикации

Запустите публикацию с помощью команды:
```bash
npm start
```

или

```bash
node src/main.js
```

## Что происходит при запуске

1. Скрипт читает историю публикаций из `data/published_articles.txt`
2. Находит первую непубликованную статью в `public/feed.xml`
3. Открывает браузер и заходит в редактор Дзен
4. Заполняет заголовок и тело статьи
5. Вставляет изображение
6. Публикует статью в два этапа (редактор → модальное окно)
7. Сохраняет информацию о публикации в `data/published_articles.txt`

## Возможные проблемы и решения

- Если публикация не происходит, проверьте актуальность селекторов в `dzen-schema.json`
- Убедитесь, что куки в `config/cookies.json` действительны
- Проверьте формат `public/feed.xml` на соответствие примеру
- Убедитесь, что в `public/feed.xml` есть хотя бы одна непубликованная статья