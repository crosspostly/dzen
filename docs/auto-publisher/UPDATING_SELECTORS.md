# Обновление селекторов при изменении интерфейса Дзен

## Когда нужно обновлять селекторы

Селекторы могут потребовать обновления в следующих случаях:
- Яндекс обновил интерфейс Дзен
- Изменилась структура HTML-элементов
- Поменялись атрибуты у элементов (data-testid, классы, и т.д.)
- Публикация перестала работать с ошибками типа "element not found"

## Как получить новые селекторы

### 1. Использование DevTools

1. Откройте Дзен в браузере
2. Нажмите F12 для открытия DevTools
3. Перейдите на вкладку Elements
4. Нажмите на значок "Выбрать элемент" (обычно в левом верхнем углу DevTools)
5. Кликните на нужный элемент на странице
6. В DevTools выделится HTML-элемент
7. Щелкните правой кнопкой мыши по элементу
8. Выберите "Copy" → "Copy selector" или "Copy JS path"

### 2. Проверка селекторов в консоли

После получения селектора проверьте его в консоли:
```javascript
document.querySelector('ваш-селектор')
```
Если элемент найден, селектор правильный.

### 3. Альтернативные методы получения селекторов

```javascript
// Поиск по тексту кнопки
Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.includes('Опубликовать'))

// Поиск по атрибутам
document.querySelector('[data-testid="publish-btn"]')

// Поиск по классам
document.querySelector('.article-editor-desktop--base-button__rootElement-75')
```

## Обновление селекторов в проекте

### В основном скрипте (src/main.js)

Найдите и обновите селекторы в соответствующих местах:
- Кнопка добавления публикации
- Кнопка "Написать статью"
- Поля заголовка и содержимого
- Кнопка вставки изображения
- Кнопки публикации

### В файле dzen-schema.json

Если вы используете селекторы из этого файла, обновите их там.

## Тестирование обновленных селекторов

1. Сделайте резервную копию старых селекторов
2. Обновите один селектор за раз
3. Протестируйте функциональность
4. Продолжайте до тех пор, пока все функции не будут работать

## Полезные инструменты

### Playwright Inspector

Запустите с инспектором Playwright:
```bash
npx playwright open https://dzen.ru/profile/editor/potemki
```

### Запись действий

Можно использовать встроенные инструменты Playwright для записи действий и получения селекторов.

## Рекомендации

- Используйте максимально точные и стабильные селекторы
- Предпочтительно использовать data-testid атрибуты
- Избегайте селекторов, основанных на временных классах
- Тестируйте селекторы на разных страницах, чтобы убедиться в их универсальности
- Документируйте изменения селекторов для будущих обновлений