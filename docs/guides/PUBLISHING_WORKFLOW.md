# üöÄ Publishing Workflow (Playwright)

–≠—Ç–æ—Ç –≥–∞–π–¥ –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –î–∑–µ–Ω –∏ –∫–∞–∫ –µ—ë –ø–æ—á–∏–Ω–∏—Ç—å, –µ—Å–ª–∏ –æ–Ω–∞ —Å–ª–æ–º–∞–ª–∞—Å—å.

---

## üõ† –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã (v2.0 - Human-like)

–ü—É–±–ª–∏–∫–∞—Ç–æ—Ä (`!posts/PRODUCTION_READY/src/main.js.ci`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É **Playwright** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–º Chromium, –∏–º–∏—Ç–∏—Ä—É—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞.

**–û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã:**
1. **–ß—Ç–µ–Ω–∏–µ —Ñ–∏–¥–∞:** –ü–∞—Ä—Å–∏—Ç `public/feed.xml` —á–µ—Ä–µ–∑ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏:** –°–≤–µ—Ä—è–µ—Ç—Å—è —Å `published_articles.txt`, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Å—Ç–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã.
3. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫—É–∫–∏ –∏–∑ `config/cookies.json` (–∏–ª–∏ –∏–∑ GitHub Secrets –≤ CI).
4. **–≠–º—É–ª—è—Ü–∏—è –≤–≤–æ–¥–∞ (Anti-Detect):**
   - **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** –í–≤–æ–¥–∏—Ç—Å—è —Å —ç–º—É–ª—è—Ü–∏–µ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (`type` —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π ~100–º—Å).
   - **–¢–µ–ª–æ —Å—Ç–∞—Ç—å–∏:** **Copy-Paste –º–µ—Ç–æ–¥**. –¢–µ–∫—Å—Ç –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Ctrl+V`. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "–ª–æ–º–∫—É" —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ React/Draft.js.
   - **–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç –¥–µ–ª–∞–µ—Ç –ø–∞—É–∑—ã –∏ —Å–∫—Ä–æ–ª–ª–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É (–∏–º–∏—Ç–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è) –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π.
5. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏ –ö–∞–ø—á–∞:**
   - –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.
   - **Smart Captcha Solver:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É "–Ø –Ω–µ —Ä–æ–±–æ—Ç" (VK Captcha), –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `iframe`.
6. **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –ñ–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Ä–µ–¥–∏—Ä–µ–∫—Ç–∞) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏ (`dzen.ru/a/...`).
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç–∞—Ç—å—é –≤ –∏—Å—Ç–æ—Ä–∏—é.

---

## üõ°Ô∏è –û–±—Ö–æ–¥ –∑–∞—â–∏—Ç—ã (Anti-Detection)

–°–∏—Å—Ç–µ–º–∞ v2.0 –≤–Ω–µ–¥—Ä—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã –æ—Ç –±–∞–Ω–∞ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫:

1.  **Clipboard Paste:** –ú—ã –Ω–µ –ø–µ—á–∞—Ç–∞–µ–º 15–∫ –∑–Ω–∞–∫–æ–≤ (—á—Ç–æ –ø–∞–ª–∏—Ç—Å—è –∫–∞–∫ –±–æ—Ç), –∞ –≤—Å—Ç–∞–≤–ª—è–µ–º –∏—Ö –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –∫–∞–∫ –∞–≤—Ç–æ—Ä –∏–∑ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ Word.
2.  **Frame-Aware Captcha:** –°–∫—Ä–∏–ø—Ç —É–º–µ–µ—Ç "–Ω—ã—Ä—è—Ç—å" –≤–æ —Ñ—Ä–µ–π–º—ã VK ID, –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —á–µ–∫–±–æ–∫—Å—ã –∏ –∫–ª–∏–∫–∞—Ç—å –ø–æ –∏—Ö –ª–µ–π–±–ª–∞–º.
3.  **Polling:** –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å" —Å–∫—Ä–∏–ø—Ç 15 —Å–µ–∫—É–Ω–¥ –∞–∫—Ç–∏–≤–Ω–æ –∂–¥–µ—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞–ø—á–∏.

---

## üîë –ö–ª—é—á–µ–≤—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã (–î–∑–µ–Ω 2026)

–ï—Å–ª–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è "–∑–∞–≤–∏—Å–ª–∞", —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –î–∑–µ–Ω –∏–∑–º–µ–Ω–∏–ª –∫–ª–∞—Å—Å—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:

| –≠–ª–µ–º–µ–Ω—Ç | –°–µ–ª–µ–∫—Ç–æ—Ä / –ü—Ä–∏–∑–Ω–∞–∫ |
|---------|-------------------|
| **–ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å"** | `[data-testid="add-publication-button"]` |
| **–ö–Ω–æ–ø–∫–∞ "–°—Ç–∞—Ç—å—è"** | `text="–ù–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ç—å—é"` |
| **–ü–æ–ª–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞** | `input[placeholder*="–∑–∞–≥–æ–ª–æ–≤–æ–∫" i]`, `div[contenteditable="true"]` (–ø–µ—Ä–≤–æ–µ) |
| **–ü–æ–ª–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** | `div[contenteditable="true"]` (–≤—Ç–æ—Ä–æ–µ) |
| **–ö–Ω–æ–ø–∫–∞ "–ö–∞—Ä—Ç–∏–Ω–∫–∞"** | `button.article-editor-desktop--side-button__sideButton-1z[data-tip="–í—Å—Ç–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"]` |
| **–ö–Ω–æ–ø–∫–∞ –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ (1)** | `.article-editor-desktop--editor-header__publishButton-gc` |
| **–ö–Ω–æ–ø–∫–∞ –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ (2)** | `button[data-testid="publish-btn"][type="submit"]` |
| **–ö–∞–ø—á–∞ (–ß–µ–∫–±–æ–∫—Å)** | `#not-robot-captcha-checkbox` (–≤–Ω—É—Ç—Ä–∏ iframe) |

---

## üöë –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º (Troubleshooting)

### 1. "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ / –í—ã–∫–∏–¥—ã–≤–∞–µ—Ç –Ω–∞ –ª–æ–≥–∏–Ω"
- **–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å—Ç–µ–∫–ª–∏ –∫—É–∫–∏ –≤ `config/cookies.json`.
- **–†–µ—à–µ–Ω–∏–µ:** 
  1. –ó–∞–π—Ç–∏ –≤ –î–∑–µ–Ω –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ.
  2. –° –ø–æ–º–æ—â—å—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (–Ω–∞–ø—Ä. EditThisCookie) —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—É–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.
  3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –≤ `config/cookies.json`.

### 2. "–ó–∞–≤–∏—Å–∞–µ—Ç –Ω–∞ —ç—Ç–∞–ø–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏"
- **–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–æ, –î–∑–µ–Ω –≤—ã–¥–∞–ª —Å–ª–æ–∂–Ω—É—é –∫–∞–ø—á—É (–∫–∞—Ä—Ç–∏–Ω–∫–∏/–ø–∞–∑–ª), –∫–æ—Ç–æ—Ä—É—é —Å–∫—Ä–∏–ø—Ç –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏.
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –æ—à–∏–±–∫–∏ –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö GitHub Actions.

### 3. "–ù–µ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ç–µ–∫—Å—Ç"
- **–ü—Ä–∏—á–∏–Ω–∞:** –ë—Ä–∞—É–∑–µ—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –¥–æ—Å—Ç—É–ø –∫ –±—É—Ñ–µ—Ä—É –æ–±–º–µ–Ω–∞.
- **–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ `browser.newContext` –ø–µ—Ä–µ–¥–∞–Ω—ã –ø—Ä–∞–≤–∞: `permissions: ['clipboard-read', 'clipboard-write']`.

---

## üìú –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- `!posts/PRODUCTION_READY/src/main.js.ci` ‚Äî –ì–ª–∞–≤–Ω—ã–π –±–æ–µ–≤–æ–π —Å–∫—Ä–∏–ø—Ç (GitHub Actions).
- `!posts/PRODUCTION_READY/src/main.js` ‚Äî –°–∫—Ä–∏–ø—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏.
- `config/cookies.json` ‚Äî –°–µ—Å—Å–∏—è.
- `published_articles.txt` ‚Äî –ë–∞–∑–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö.
