# Инструкция по обновлению проекта

## Когда нужно обновлять проект

Проект может потребовать обновления в следующих случаях:
- Яндекс обновил интерфейс Дзен
- Публикация перестала работать
- Появились ошибки типа "element not found"
- Изменились селекторы элементов

## Пошаговая инструкция по обновлению

### 1. Проверка текущей версии

1. Убедитесь, что у вас есть резервная копия текущего проекта
2. Запустите текущую версию и проверьте, работает ли публикация
3. Если публикация не работает, определите, на каком этапе возникает ошибка

### 2. Обновление селекторов

1. Откройте `SELECTORS_INFO.md` и `UPDATING_SELECTORS.md` для получения информации о селекторах
2. Используйте DevTools в браузере для получения новых селекторов
3. Обновите селекторы в:
   - `src/main.js` - в соответствующих местах
   - `dzen-schema.json` - если используются селекторы оттуда

### 3. Проверка структуры HTML

1. Откройте Дзен в браузере
2. Используйте DevTools, чтобы проверить структуру HTML для:
   - Поля заголовка
   - Поля содержимого
   - Кнопки вставки изображения
   - Кнопки публикации
   - Модального окна подтверждения

### 4. Тестирование изменений

1. Сделайте изменения по одному элементу за раз
2. Протестируйте каждый этап публикации
3. Убедитесь, что все функции работают корректно

### 5. Обновление документации

1. Обновите `SELECTORS_INFO.md` с новыми селекторами
2. При необходимости обновите `UPDATING_SELECTORS.md`
3. Обновите `MAIN_SCRIPT_INFO.md`, если структура скрипта изменилась

## Возможные проблемы и решения

### Проблема: Кнопка публикации не найдена
Решение: Обновите селекторы для кнопок публикации в `src/main.js`

### Проблема: Поля заголовка или содержимого не заполняются
Решение: Проверьте и обновите селекторы для полей ввода

### Проблема: Изображение не вставляется
Решение: Обновите селектор для кнопки вставки изображения

### Проблема: Модальное окно не открывается
Решение: Проверьте, не изменились ли селекторы для подтверждения публикации

## Рекомендации по обновлению

### Проверка изменений
- Регулярно проверяйте, работает ли публикация
- Обратите внимание на любые изменения в интерфейсе Дзен
- Следите за обновлениями в официальных каналах Яндекса

### Тестирование
- Всегда тестируйте изменения на тестовой статье
- Не запускайте автоматическую публикацию сразу после обновления
- Проверьте все этапы процесса публикации

### Резервное копирование
- Сохраняйте резервные копии рабочих версий
- Делайте резервные копии перед каждым обновлением
- Используйте систему контроля версий (например, Git)

## Полезные инструменты для обновления

### DevTools
- Используйте для поиска новых селекторов
- Проверяйте структуру HTML
- Тестируйте селекторы в консоли

### Playwright Inspector
- Используйте для проверки селекторов
- Тестируйте взаимодействие с элементами

### Тестовый режим
- Запускайте скрипт в режиме просмотра (headless: false)
- Наблюдайте за процессом публикации
- Легче отлаживать проблемы

## Обновление зависимостей

Если проект не работает из-за устаревших зависимостей:
1. Обновите Playwright: `npm update playwright`
2. Проверьте совместимость с новыми версиями
3. Протестируйте функциональность после обновления

## Заключение

При правильном подходе обновление проекта при изменениях интерфейса Дзен не должно быть сложным процессом. Главное - делать это пошагово, тестировать изменения и сохранять резервные копии рабочих версий.