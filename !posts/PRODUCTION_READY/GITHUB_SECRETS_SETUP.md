# üîê GitHub Secrets Setup: DZEN_COOKIES_JSON

## Overview

–≠—Ç–æ **—Å—É–ø–µ—Ä –ø—Ä–æ—Å—Ç–æ**! –ù–∏–∫–∞–∫–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –Ω—É–∂–Ω–æ!

**–ß—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å:**
1. –ö–æ–ø–∏—Ä—É–µ—à—å –≤–µ—Å—å JSON —Å –∫—É–∫–∞–º–∏
2. –í—Å—Ç–∞–≤–ª—è–µ—à—å –≤ GitHub Secret
3. –í—Å—ë! Actions —Å–∞–º –∑–∞–≥—Ä—É–∂–∞–µ—Ç

**–ü–æ—á–µ–º—É —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ?**
- ‚úÖ GitHub —Å–∞–º –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å JSON
- ‚úÖ Workflow —Å–∞–º —á–∏—Ç–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç
- ‚úÖ –ù–∏–∫–∞–∫–æ–≥–æ Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è!
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–π-–≤—Å—Ç–∞–≤—å

## üéØ Step 1: –°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å JSON

–¢–≤–æ–π JSON –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ (—É–∂–µ –µ—Å—Ç—å —É —Ç–µ–±—è):

```json
[
  {
    "name": "mda2_beacon",
    "value": "1765685032529",
    "domain": ".dzen.ru",
    "path": "/",
    "expires": 1800245033,
    "httpOnly": false,
    "secure": true,
    "sameSite": "None"
  },
  ...
  –í–°–ï –¢–í–û–ò –ö–£–ö–ò
  ...
]
```

**–°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å –º–∞—Å—Å–∏–≤ —Ü–µ–ª–∏–∫–æ–º** (–æ—Ç –ø–µ—Ä–≤–æ–≥–æ `[` –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ `]`)

## üîê Step 2: –î–æ–±–∞–≤—å –≤ GitHub Secret

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å GitHub

1. –ò–¥–∏ —Å—é–¥–∞:
   ```
   https://github.com/crosspostly/dzen/settings/secrets/actions
   ```

2. –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
   - –û—Ç–∫—Ä–æ–µ—à—å —Ä–µ–ø–æ
   - Settings (–≤–≤–µ—Ä—Ö—É)
   - Left sidebar: **Secrets and variables** > **Actions**

3. –ù–∞–∂–º–∏: **"New repository secret"**

4. –ó–∞–ø–æ–ª–Ω–∏:
   - **Name:** `DZEN_COOKIES_JSON` (—Ç–æ—á–Ω–æ —Ç–∞–∫!)
   - **Value:** –í—Å—Ç–∞–≤—å –≤–µ—Å—å JSON (–æ—Ç `[` –¥–æ `]`)
   - **Save**

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ GitHub CLI (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
# –°–æ—Ö—Ä–∞–Ω–∏ JSON –≤ —Ñ–∞–π–ª
# –ü–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω–∏:
gh secret set DZEN_COOKIES_JSON < cookies.json
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–í Settings > Secrets –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
üîê DZEN_COOKIES_JSON
Updated 2 minutes ago
```

## üé® –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Actions

**–í workflow —Ñ–∞–π–ª–µ:**

```yaml
- name: üîê Load cookies from GitHub Secrets
  run: |
    # –ß–∏—Ç–∞–µ–º —Å–µ–∫—Ä–µ—Ç –∫–∞–∫ JSON (–ë–ï–ó –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è!)
    $cookiesJson = """${{ secrets.DZEN_COOKIES_JSON }}"""
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞–ø—Ä—è–º—É—é –≤ config/cookies.json
    Set-Content -Path 'config/cookies.json' -Value $cookiesJson
```

**–ì–æ—Ç–æ–≤–æ!**

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### ‚ùå Old Way (Base64)
```
JSON ‚Üí Encode Base64 ‚Üí DZEN_COOKIES_BASE64
                    ‚Üì
              Decode Base64 ‚Üí JSON
              (–ª–∏—à–Ω–∏–π —à–∞–≥)
```

### ‚úÖ New Way (Direct JSON)
```
JSON ‚Üí DZEN_COOKIES_JSON
        ‚Üì
    –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–ø—Ä—è–º—É—é
    (–ø—Ä–æ—Å—Ç–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ!)
```

## üîÑ –õ–æ–∫–∞–ª—å–Ω–æ–µ + GitHub

**–¢–µ–±–µ –Ω—É–∂–Ω—ã –î–í–ê –º–µ—Å—Ç–∞ —Å –∫—É–∫–∞–º–∏:**

### –õ–æ–∫–∞–ª—å–Ω–æ (–Ω–∞ —Ç–≤–æ–µ–º –ü–ö):

```bash
# –°–æ—Ö—Ä–∞–Ω–∏ –∫—É–∫–∏ –≤ —Ñ–∞–π–ª
!posts/PRODUCTION_READY/config/cookies.json

# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—à—å –ª–æ–∫–∞–ª—å–Ω–æ:
cd !posts/PRODUCTION_READY
node src/main.js
```

**–§–∞–π–ª:** –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–µ—à—å JSON –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞

### –ù–∞ GitHub:

```
Settings > Secrets > DZEN_COOKIES_JSON
          ‚Üì
–í—Å—Ç–∞–≤–ª—è–µ—à—å —Ç–æ—Ç –∂–µ JSON
          ‚Üì
Workflow –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

**–°–µ–∫—Ä–µ—Ç:** –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω GitHub

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª:**
- –í `.gitignore` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
- –ù–∞ —Ç–≤–æ–µ–º –ü–ö
- –í–∏–¥–∏—à—å —Ç–æ–ª—å–∫–æ —Ç—ã

‚úÖ **GitHub Secret:**
- –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω GitHub
- –í–∏–¥–∏—à—å –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ù–ï –≤–∏–¥–∏—à—å –≤ –ª–æ–≥–∞—Ö
- –ù–ï –≤–∏–¥—à–µ–Ω –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (–µ—Å–ª–∏ public repo)

## üìù –í–ê–ñ–ù–û: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å

```bash
# –£–±–µ–¥–∏—Å—å —á—Ç–æ –≤ .gitignore:
echo "config/cookies.json" >> .gitignore

# –ï—Å–ª–∏ —É–∂–µ —Å–ª—É—á–∞–π–Ω–æ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª:
git rm --cached config/cookies.json
git commit -m "Remove cookies from tracking"
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Test 1: –õ–æ–∫–∞–ª—å–Ω–æ

```bash
cd !posts/PRODUCTION_READY

# –£–±–µ–¥–∏—Å—å —á—Ç–æ –µ—Å—Ç—å config/cookies.json
ls config/cookies.json

# –ó–∞–ø—É—Å—Ç–∏
node src/main.js
```

### Test 2: –ù–∞ GitHub

1. Actions > "Auto-Publish Articles Every 3 Hours"
2. "Run workflow"
3. –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏:
   ```
   ‚úÖ Cookies loaded from GitHub Secrets (DZEN_COOKIES_JSON)
   ‚úÖ Valid JSON format (40 cookies)
   ```

## ‚ö° –ß—Ç–æ –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### Error: "DZEN_COOKIES_JSON secret is empty"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –¥–æ–±–∞–≤–∏–ª —Å–µ–∫—Ä–µ—Ç –≤ Settings
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∏–º—è —Ç–æ—á–Ω–æ: `DZEN_COOKIES_JSON` (–±–æ–ª—å—à–∏–µ –±—É–∫–≤—ã)
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å—Ç–∞–≤–∏–ª –≤–µ—Å—å JSON (–æ—Ç `[` –¥–æ `]`)
4. –ü–æ–¥–æ–∂–¥–∏ –º–∏–Ω—É—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞

### Error: "Could not parse JSON"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å JSON —Ñ–æ—Ä–º–∞—Ç (–∏—Å–ø–æ–ª—å–∑—É–π https://jsonlint.com/)
2. –£–±–µ–¥–∏—Å—å –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
3. –°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å JSON –µ—â—ë —Ä–∞–∑ —Å –±—Ä–∞—É–∑–µ—Ä–∞

### Error: "File not created"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞: `!posts/PRODUCTION_READY/config/`
2. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
3. –ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ workflow

## üì± Monitoring

### –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏

https://github.com/crosspostly/dzen/actions

```
‚úÖ Cookies loaded from GitHub Secrets (DZEN_COOKIES_JSON)
‚úÖ Valid JSON format (40 cookies)
‚úÖ Cookies file created: 15234 bytes
```

### –ü—Ä–æ–≤–µ—Ä—å –∏—Å—Ç–æ—Ä–∏—é

```bash
cat !posts/PRODUCTION_READY/published_articles.txt
```

## üéØ –ß–µ–∫-–ª–∏—Å—Ç

```
[ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–ª –≤–µ—Å—å JSON –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
[ ] –°–æ—Ö—Ä–∞–Ω–∏–ª –ª–æ–∫–∞–ª—å–Ω–æ –≤ config/cookies.json
[ ] –î–æ–±–∞–≤–∏–ª –≤ .gitignore
[ ] –î–æ–±–∞–≤–∏–ª GitHub Secret DZEN_COOKIES_JSON
[ ] –í—Å—Ç–∞–≤–∏–ª —Ç–æ—Ç –∂–µ JSON –≤ —Å–µ–∫—Ä–µ—Ç
[ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –ª–æ–∫–∞–ª—å–Ω–æ (node src/main.js)
[ ] –ó–∞–ø—É—Å—Ç–∏–ª workflow –≤—Ä—É—á–Ω—É—é (Actions > Run)
[ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ - –≤—Å—ë –∑–µ–ª—ë–Ω–æ–µ ‚úÖ
[ ] –ñ–¥—ë–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤ (–∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞)
```

## üìö –§–∞–π–ª—ã –∏ –∏—Ö —Ä–æ–ª—å

```
–õ–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Ç–≤–æ–µ–º –ü–ö:
!posts/PRODUCTION_READY/config/cookies.json
‚Üì (–æ–±—ã—á–Ω—ã–π JSON —Ñ–∞–π–ª)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: node src/main.js

–ù–∞ GitHub (–≤ Actions):
DZEN_COOKIES_JSON (secret)
‚Üì (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω)
–°–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤: config/cookies.json (–≤—Ä–µ–º–µ–Ω–Ω—ã–π)
‚Üì
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: node src/main.js
```

## üöÄ –¢–∞–∫ —á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å

1. ‚úÖ –£–∂–µ –≥–æ—Ç–æ–≤–æ: –∫—É–∫–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ JSON
2. ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏ –ª–æ–∫–∞–ª—å–Ω–æ: `config/cookies.json`
3. ‚úÖ –î–æ–±–∞–≤—å –≤ `.gitignore`
4. ‚úÖ –°–∫–æ–ø–∏—Ä—É–π JSON
5. ‚úÖ –î–æ–±–∞–≤—å GitHub Secret: `DZEN_COOKIES_JSON`
6. ‚úÖ –í—Å—Ç–∞–≤—å JSON –≤ —Å–µ–∫—Ä–µ—Ç
7. ‚úÖ –¢–µ—Å—Ç: –∑–∞–ø—É—Å—Ç–∏ Actions –≤—Ä—É—á–Ω—É—é
8. ‚úÖ –ì–æ—Ç–æ–≤–æ! –î–∞–ª—å—à–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üéâ –ò—Ç–æ–≥–æ

**–ë—ã–ª–æ:** –ö–æ–¥–∏—Ä–æ–≤–∞—Ç—å –≤ Base64, –ø–æ—Ç–æ–º –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å

**–°—Ç–∞–ª–æ:** –ü—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ—à—å JSON –∏ –≤—Å—Ç–∞–≤–ª—è–µ—à—å

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è ‚úÖ

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è ‚úÖ

---

**–°–µ–∫—Ä–µ—Ç:** `DZEN_COOKIES_JSON` (–Ω–∞ GitHub)
**–§–∞–π–ª:** `config/cookies.json` (–Ω–∞ —Ç–≤–æ–µ–º –ü–ö + –≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤ Actions)
**–§–æ—Ä–º–∞—Ç:** Pure JSON (no encoding)

Last updated: 2026-01-04 08:15 UTC
