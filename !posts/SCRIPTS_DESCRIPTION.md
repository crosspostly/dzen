# Описание скриптов автоматического публишера Дзен

## Основные скрипты

### `final_exact_publisher_updated.js` - Основной публишер
- **Назначение**: Основной скрипт для автоматической публикации статьи из feed.xml
- **Функции**:
  - Чтение статьи из `public/feed.xml`
  - Заполнение заголовка и тела статьи (с полным текстом)
  - Вставка изображения по точному селектору
  - Нажатие Enter после вставки тела статьи
  - Двухшаговая публикация (в редакторе и в модальном окне)
  - Использование точных селекторов из `dzen-schema.json`

### `analyze_feed.js` - Анализ фида
- **Назначение**: Извлечение и анализ статей из `public/feed.xml`
- **Функции**:
  - Парсинг RSS-файла
  - Извлечение заголовков, описаний, контента и изображений
  - Вывод информации о найденных статьях

## Вспомогательные скрипты

### `action_recorder_with_json.js` - Запись действий
- **Назначение**: Запись действий пользователя в Дзен для последующего воспроизведения
- **Функции**:
  - Отслеживание кликов и ввода текста
  - Сохранение селекторов и действий в `dzen-schema.json`
  - Использование куки для аутентификации

### `auto_publisher.js` - Автоматический публишер
- **Назначение**: Альтернативный публишер с базовыми функциями
- **Функции**:
  - Загрузка куки
  - Открытие редактора
  - Заполнение статьи
  - Публикация

## Скрипты для поиска селекторов

### `find_selectors.js` - Поиск селекторов
- **Назначение**: Анализ DOM-элементов на странице Дзен
- **Функции**:
  - Открытие страницы с куки
  - Поиск всех возможных селекторов для полей ввода
  - Вывод информации о найденных элементах

### `get_current_selectors.js` - Получение текущих селекторов
- **Назначение**: Извлечение актуальных селекторов из DOM
- **Функции**:
  - Анализ структуры страницы
  - Извлечение селекторов для различных элементов
  - Вывод информации для использования в других скриптах

## Скрипты для проверки и отладки

### `check_editor.js` - Проверка редактора
- **Назначение**: Проверка работоспособности редактора статьи
- **Функции**:
  - Открытие редактора с куки
  - Проверка доступности полей ввода
  - Вывод информации о состоянии редактора

### `debug_publisher.js` - Отладочный публишер
- **Назначение**: Публишер с подробной отладочной информацией
- **Функции**:
  - Все функции основного публишера
  - Дополнительные логи для отладки
  - Подробное отображение каждого шага

## Скрипты для вставки изображений

### `exact_selector_publisher.js` - Публишер с точными селекторами
- **Назначение**: Публикация с использованием точных селекторов из dzen-schema.json
- **Функции**:
  - Использование точных селекторов для всех элементов
  - Вставка изображений по точному селектору
  - Двухшаговая публикация

## Скрипты для работы с куками

### `manual_login.js` - Ручной вход
- **Назначение**: Открытие браузера для ручного входа в Дзен
- **Функции**:
  - Открытие страницы Дзен
  - Возможность ручного входа
  - Сохранение куки для дальнейшего использования

## Структура файлов

```
!a_posts/
├── config/
│   └── cookies.json              # Куки для аутентификации
├── public/
│   └── feed.xml                  # RSS-фид с статьями
├── scripts/                      # Вспомогательные скрипты
├── main/
│   └── final_exact_publisher_updated.js  # Основной публишер
├── utils/
│   ├── analyze_feed.js           # Анализ фида
│   ├── action_recorder_with_json.js # Запись действий
│   ├── find_selectors.js         # Поиск селекторов
│   └── check_editor.js           # Проверка редактора
├── debug/
│   └── debug_publisher.js        # Отладочный публишер
├── selectors/
│   └── exact_selector_publisher.js # Публикация с точными селекторами
├── login/
│   └── manual_login.js           # Ручной вход
├── DOCUMENTATION_FINAL.md        # Полная документация
├── README_FINAL.md               # Краткое руководство
├── ALGORITHM.md                  # Алгоритм работы
├── SELECTORS_UPDATED.md          # Обновленные селекторы
└── task_for_agent_updated.md     # Задание для агента
```

## Зависимости

- `playwright` - для автоматизации браузера
- `fs` - для работы с файлами
- `package.json` - для управления зависимостями

## Запуск скриптов

### Основной публишер
```bash
node final_exact_publisher_updated.js
```

### Анализ фида
```bash
node analyze_feed.js
```

### Запись действий
```bash
node action_recorder_with_json.js
```

## Важные файлы

- `dzen-schema.json` - содержит записанные селекторы и действия
- `config/cookies.json` - содержит куки для аутентификации
- `public/feed.xml` - содержит статьи для публикации
- `DOCUMENTATION_FINAL.md` - полная документация по проекту