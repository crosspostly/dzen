# ü§ñ –ó–ê–î–ê–ù–ò–ï –î–õ–Ø –ò–ò: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–¥–µ–ª–∫–∞ ZenMaster —Å–∏—Å—Ç–µ–º—ã

**–°—Ç–∞—Ç—É—Å**: üî¥ –ö–†–ò–¢–ò–ß–ù–´–ô  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ú–ê–ö–°–ò–ú–£–ú  
**–î–µ–¥–ª–∞–π–Ω**: –ê–°–ê–ü  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—å–∏ –Ω–∞ 15,000+ –∑–Ω–∞–∫–æ–≤, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ –ø–∞–¥–∞–µ—Ç –∏–∑-–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫.

---

## üìå –ö–†–ê–¢–ö–û: –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

```
–ë–´–õ–û:                           –°–¢–ê–ù–ï–¢:
- 5 —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤            ‚Üí 1 —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–ø—Ç–æ–≤
- Cleanup –ø–æ—Ä—Ç–∏—Ç —Å—Ç–∞—Ç—å–∏        ‚Üí Auto-restore –∂–∏–≤–æ–π
- –î—É–±–ª–∏ —ç–ø–∏–∑–æ–¥–æ–≤              ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- –ù–µ—Ç Phase2 –∫–æ–Ω—Ç—Ä–æ–ª—è          ‚Üí Quality gate –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- –ü–∞—Ä—Å–∏–Ω–≥ –ø–∞–¥–∞–µ—Ç              ‚Üí Graceful fallback
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°—Ç–∞—Ç—å–∏ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Å Phase2 Score 75+

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´ (—Ç–µ–∫—É—â–∞—è)

### –≠—Ç–∞–ø—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

```
STAGE 0: Plan Creation (5 –º–∏–Ω)
‚îú‚îÄ INPUT: –¢–µ–º–∞
‚îú‚îÄ OUTPUT: PlotBible JSON
‚îî‚îÄ –ü–†–û–ë–õ–ï–ú–ê: –ü–∞—Ä—Å–∏–Ω–≥ –ø–∞–¥–∞–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è default

STAGE 1: Episode Writing (15 –º–∏–Ω)
‚îú‚îÄ INPUT: PlotBible JSON
‚îú‚îÄ OUTPUT: 7-12 .md —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ –ü–†–û–ë–õ–ï–ú–ê 1: –≠–ø–∏–∑–æ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å –¥—É–±–ª—è–º–∏
‚îî‚îÄ –ü–†–û–ë–õ–ï–ú–ê 2: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (Phase2 Score)

STAGE 2: Article Assembly (10 –º–∏–Ω)
‚îú‚îÄ INPUT: 7-12 —ç–ø–∏–∑–æ–¥–æ–≤
‚îú‚îÄ OUTPUT: –°–æ–±—Ä–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è
‚îú‚îÄ –ü–†–û–ë–õ–ï–ú–ê: –ö–æ–ø–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç STAGE 1 –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–ø–∏—Å–∏
‚îî‚îÄ –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å PlotBible

STAGE 3: Cleanup (5 –º–∏–Ω) ‚Üê –ì–ù–ò–õ–û–ô –®–ê–ì
‚îú‚îÄ INPUT: –°–æ–±—Ä–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è
‚îú‚îÄ OUTPUT: "–ß–∏—Å—Ç–∞—è" —Å—Ç–∞—Ç—å—è (–Ω–æ –∏—Å–ø–æ—Ä—á–µ–Ω–Ω–∞—è)
‚îú‚îÄ –ü–†–û–ë–õ–ï–ú–ê 1: –£–¥–∞–ª—è–µ—Ç –Ω—É–∂–Ω—ã–µ —Ñ—Ä–∞–∑—ã
‚îú‚îÄ –ü–†–û–ë–õ–ï–ú–ê 2: –ù–∞—Ä—É—à–∞–µ—Ç intentional —Å—Ç–∏–ª—å
‚îî‚îÄ –ü–†–û–ë–õ–ï–ú–ê 3: –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Phase2 Score

GITHUB WORKFLOW: Auto-Restore (–∫–∞–∂–¥—É—é –Ω–æ—á—å) ‚Üê –°–ü–ê–°–ê–¢–ï–õ–¨
‚îú‚îÄ INPUT: –°—Ç–∞—Ç—å–∏ —Å Phase2 Score < 65
‚îú‚îÄ PROCESS: –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≥–æ–ª–æ—Å
‚îî‚îÄ OUTPUT: –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ (Phase2 75+)
```

---

## ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò

### –û—à–∏–±–∫–∞ 1: –ü–∞—Ä—Å–∏–Ω–≥ PlotBible

**–ì–¥–µ**: `src/services/stage-0/generate-plotbible.ts`

**–ü—Ä–æ–±–ª–µ–º–∞**:
```typescript
const bible = parseJSON(response)
if (!bible) useDefault()  // ‚Üê –°–ú–ï–†–¢–¨: default bible –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ**: –°—Ç–∞—Ç—å—è –ø—Ä–æ 25-–ª–µ—Ç–Ω—é—é, –Ω–æ —Ç–µ–º–∞ –ø—Ä–æ 50-–ª–µ—Ç–Ω—é—é

**–†–µ—à–µ–Ω–∏–µ**: –ù–µ –ø–∞—Ä—Å–∏—Ç—å, –≤–∑—è—Ç—å –∫–∞–∫ —Ç–µ–∫—Å—Ç
```typescript
const biblesText = response  // –í–∑—è—Ç—å –∫–∞–∫ –µ—Å—Ç—å
// –ï—Å–ª–∏ JSON - fine, –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç - —Ç–æ–∂–µ fine
// –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –î–ê–õ–¨–®–ï –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç, –Ω–µ –∫–∞–∫ JSON
```

---

### –û—à–∏–±–∫–∞ 2: Cleanup –ø–æ—Ä—Ç–∏—Ç —Å—Ç–∞—Ç—å–∏

**–ì–¥–µ**: `src/services/stage-3/cleanup.ts`

**–ü—Ä–æ–±–ª–µ–º–∞**:
```typescript
// –£–¥–∞–ª—è–µ—Ç "–ë–æ–∂–µ"
const cleaned = text.replace(/–ë–æ–∂–µ|–º–∞–º–∞|—Å–ø–∞—Å–∏—Ç–µ/gi, '')

// –£–¥–∞–ª—è–µ—Ç –Ω—É–∂–Ω—ã–µ –∑–∞–ø—è—Ç—ã–µ
const normalized = text.replace(/,\s+/g, ' ')  // ‚Üê KILL

// –†–µ–∑—É–ª—å—Ç–∞—Ç: "–ë–æ–∂–µ –∫–∞–∫ —è –±—ã–ª–∞ –≥–ª—É–ø–∞" ‚Üí "–∫–∞–∫ —è –±—ã–ª–∞ –≥–ª—É–ø–∞"
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ**: –¢–µ—Ä—è–µ—Ç—Å—è —ç–º–æ—Ü–∏—è, —Å—Ç–∞—Ç—å—è –∑–≤—É—á–∏—Ç —Ä–æ–±–æ—Ç–Ω–æ

**–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞—Ç—å cleanup, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ restoreVoice

---

### –û—à–∏–±–∫–∞ 3: –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —ç–ø–∏–∑–æ–¥—ã

**–ì–¥–µ**: `src/services/stage-1/generate-episodes.ts`

**–ü—Ä–æ–±–ª–µ–º–∞**:
```typescript
for (let i = 0; i < 7; i++) {
  const episode = await generateEpisode()
  // –ù–ï –ü–†–û–í–ï–†–Ø–ï–¢: —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç–ø–∏–∑–æ–¥ –¥—É–±–ª–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
  episodes.push(episode)  // PUSH –ë–ï–ó –ü–†–û–í–ï–†–ö–ò
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ**:
```
–≠–ø–∏–∑–æ–¥ 3: "–ö–æ–≥–¥–∞ –º—É–∂ —É—à—ë–ª..."
–≠–ø–∏–∑–æ–¥ 5: "–ö–æ–≥–¥–∞ –º—É–∂ —É—à—ë–ª..." ‚Üê –î–£–ë–õ–¨!
```

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Levenshtein distance

---

### –û—à–∏–±–∫–∞ 4: –ù–µ—Ç Phase2 –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞ —ç—Ç–∞–ø–∞—Ö

**–ì–¥–µ**: –í–µ–∑–¥–µ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

**–ü—Ä–æ–±–ª–µ–º–∞**:
```
STAGE 1 –≤—ã–¥–∞—ë—Ç —ç–ø–∏–∑–æ–¥ —Å Phase2 Score 45
‚Üì (–ë–ï–ó –ü–†–û–í–ï–†–ö–ò)
STAGE 2 —Å–æ–±–∏—Ä–∞–µ—Ç –µ–≥–æ
‚Üì (–ë–ï–ó –ü–†–û–í–ï–†–ö–ò)
STAGE 3 –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–ù–û –£–ñ–ï –ü–û–ó–î–ù–û)
‚Üì
–í –±–∞–∑—É –ø–æ–ø–∞–¥–∞–µ—Ç –≥–æ–≤–Ω–æ
```

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å Quality Gate –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

---

### –û—à–∏–±–∫–∞ 5: –î—É–±–ª–∏ –≤ –∫–æ–¥–µ

**–ì–¥–µ**: –í–µ–∑–¥–µ

**–ü—Ä–æ–±–ª–µ–º—ã**:
```
cleanup.ts           ‚Üê –ñ–ò–í–û–ô (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ STAGE 3)
cleanup-old.ts       ‚Üê –ú–ï–†–¢–í–ï–¶ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
cleanup-v2.ts        ‚Üê –ú–ï–†–¢–í–ï–¶ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

‚Üì

normalizeText() –≤ cleanup.ts
normalizeText() –≤ assemble.ts
normalizeText() –≤ restore.ts

‚Üì (3 —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ = CHAOS)
```

**–†–µ—à–µ–Ω–∏–µ**: 1 —Ñ—É–Ω–∫—Ü–∏—è –≤ 1 –º–µ—Å—Ç–µ, –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç—É

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: 5 –≠–¢–ê–ü–û–í –ü–ï–†–ï–î–ï–õ–ö–ò

### –≠–¢–ê–ü A: –ü—Ä–æ–º–ø—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è**:

```
prompts/
‚îú‚îÄ‚îÄ stage-0-plan.md           ‚Üê –ü—Ä–æ–º–ø—Ç –¥–ª—è STAGE 0
‚îú‚îÄ‚îÄ stage-1-episodes.md       ‚Üê –ü—Ä–æ–º–ø—Ç –¥–ª—è STAGE 1
‚îú‚îÄ‚îÄ stage-2-assemble.md       ‚Üê –ü—Ä–æ–º–ø—Ç –¥–ª—è STAGE 2
‚îú‚îÄ‚îÄ stage-3-restore.md        ‚Üê –ü—Ä–æ–º–ø—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≥–æ–ª–æ—Å–∞
‚îî‚îÄ‚îÄ shared/
    ‚îú‚îÄ‚îÄ voice-guidelines.md   ‚Üê –ö–∞–∫ –¥–æ–ª–∂–Ω–∞ –∑–≤—É—á–∞—Ç—å —Å—Ç–∞—Ç—å—è
    ‚îú‚îÄ‚îÄ anti-detect.md        ‚Üê –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å AI-–¥–µ—Ç–µ–∫—Ü–∏–∏
    ‚îú‚îÄ‚îÄ archetype-rules.md    ‚Üê 7 –∞—Ä—Ö–µ—Ç–∏–ø–æ–≤ + —Ñ–æ—Ä–º—É–ª—ã
    ‚îî‚îÄ‚îÄ quality-gates.md      ‚Üê –ö–æ–≥–¥–∞ —Å—Ç–∞—Ç—å—è —Ö–æ—Ä–æ—à–∞
```

**–°–¥–∞—á–∞**: –í—Å–µ —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã —á–∏—Ç–∞—Ç—å—Å—è –∏–∑ `fs.readFileSync()`

---

### –≠–¢–ê–ü B: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ STAGE 0

**–§–∞–π–ª**: `src/services/stage-0/generate-plotbible.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:

1. **–ü–∞—Ä—Å–∏–Ω–≥ ‚Üí Graceful fallback**
```typescript
// –ë–´–õ–û (–ø–∞–¥–∞–µ—Ç):
const bible = parseJSON(response)
if (!bible) useDefault()

// –î–û–õ–ñ–ù–û (–Ω–µ –ø–∞–¥–∞–µ—Ç):
let bible
try {
  bible = JSON.parse(response)
} catch (e) {
  // –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –±–µ—Ä—ë–º –∫–∞–∫ —Å—Ç—Ä–æ–∫—É
  bible = response
}

// –ó–∞—Ç–µ–º: –ø–µ—Ä–µ–¥–∞—ë–º –¥–∞–ª—å—à–µ –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç
const prompt = `
–í–æ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—å–µ:
${typeof bible === 'string' ? bible : JSON.stringify(bible)}
...`
```

2. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—ã–≤–æ–¥–∞**
```typescript
// –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PlotBible:
const validation = await validatePlotBible(bible)
if (validation.phase2Score < 65) {
  console.log('‚ö†Ô∏è PlotBible –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º...')
  bible = await restoreVoiceToJson(bible)
}
```

---

### –≠–¢–ê–ü C: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ STAGE 1

**–§–∞–π–ª**: `src/services/stage-1/generate-episodes.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —ç–ø–∏–∑–æ–¥–æ–≤**
```typescript
const episodes = []

for (let i = 0; i < targetCount; i++) {
  let episode = await generateEpisode(plotBible)
  let attempts = 0
  
  // –ü–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–º:
  while (attempts < 3) {
    const isDuplicate = episodes.some(e => 
      levenshteinDistance(e.text, episode.text) > 0.75
    )
    
    if (isDuplicate) {
      console.log(`‚ö†Ô∏è –≠–ø–∏–∑–æ–¥ ${i} - –¥—É–±–ª—å, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∑–∞–Ω–æ–≤–æ...`)
      episode = await generateEpisode(plotBible)
      attempts++
    } else {
      break  // –£–Ω–∏–∫–∞–ª–µ–Ω, –±–µ—Ä—ë–º –µ–≥–æ
    }
  }
  
  episodes.push(episode)
}
```

2. **Quality gate –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç–ø–∏–∑–æ–¥–∞**
```typescript
// –ü–æ—Å–ª–µ generateEpisode:
while (episode.phase2Score < 70) {
  console.log(`‚ö†Ô∏è –≠–ø–∏–∑–æ–¥ ${i}: Phase2=${episode.phase2Score} < 70`)
  episode = await restoreVoice(episode, plotBible)
}
```

---

### –≠–¢–ê–ü D: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ STAGE 2

**–§–∞–π–ª**: `src/services/stage-2/assemble-article.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å PlotBible**
```typescript
// INPUT: episodes, plotBible

// –ü–†–ï–ñ–î–ï –ß–ï–ú —Å–æ–±–∏—Ä–∞—Ç—å, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
for (const episode of episodes) {
  const validation = validateAgainstBible(episode, plotBible)
  if (!validation.isValid) {
    console.log('‚ùå –≠–ø–∏–∑–æ–¥ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PlotBible, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º...')
    episode.text = await synchronizeWithBible(episode, plotBible)
  }
}
```

2. **–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ (–Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)**
```typescript
// STAGE 2 –î–û–õ–ñ–ï–ù –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å, –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å

// –î–ª—è LEDE:
const lede = await generateLede(episodes[0], plotBible)
// (–Ω–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ episodes)

// –î–ª—è Development:
const development = await generateDevelopment(
  episodes.slice(1, 4), 
  plotBible
)
// (–Ω–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)

// –î–ª—è Climax:
const climax = await generateClimax(
  episodes.slice(4, 7),
  plotBible
)
// (–Ω–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –Ω–∞–π—Ç–∏ –≥–ª–∞–≤–Ω—ã–π –º–æ–º–µ–Ω—Ç)

// –ò —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è Resolution –∏ Finale
```

3. **Quality gate –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏**
```typescript
const article = `${lede}${development}${climax}...`

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ:
if (article.length < 15000) {
  console.log('‚ùå –°—Ç–∞—Ç—å—è —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∞—è:', article.length)
  // –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–∏
}

while (article.phase2Score < 70) {
  console.log('‚ùå Phase2 Score:', article.phase2Score)
  article = await restoreVoice(article, plotBible)
}
```

---

### –≠–¢–ê–ü E: –£–±—Ä–∞—Ç—å STAGE 3, –æ—Å—Ç–∞–≤–∏—Ç—å Auto-Restore

**–§–∞–π–ª**: `src/services/stage-3/cleanup.ts`

**–†–µ—à–µ–Ω–∏–µ**: **–£–î–ê–õ–ò–¢–¨** —ç—Ç–æ—Ç —Ñ–∞–π–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é

**–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ**: –ü–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ Auto-Restore

```yaml
# .github/workflows/auto-restore-articles.yml

name: Auto Restore Articles
on:
  schedule:
    - cron: '0 3 * * *'  # –ö–∞–∂–¥—É—é –Ω–æ—á—å –≤ 3 AM

jobs:
  restore:
    runs-on: ubuntu-latest
    steps:
      - name: Find low-quality articles
        run: |
          # –ù–∞–π—Ç–∏ –í–°–ï —Å—Ç–∞—Ç—å–∏ —Å Phase2 < 75
          articles=$(find articles -name "*.md" \
            -exec grep -l "phase2_score.*[0-7][0-9]" {} \;)
          echo "ARTICLES=$articles" >> $GITHUB_ENV
      
      - name: Restore voice
        run: |
          # –î–ª—è –ö–ê–ñ–î–û–ô —Å—Ç–∞—Ç—å–∏:
          # 1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ü–µ–ª–∏–∫–æ–º
          # 2. –ü–µ—Ä–µ–¥–∞—Ç—å AI: "–ü–µ—Ä–µ–¥–µ–ª–∞–π, –±–æ–ª–µ–µ –∂–∏–≤–æ–π –≥–æ–ª–æ—Å"
          # 3. –ó–∞–º–µ–Ω–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—É—é
          # 4. –û–±–Ω–æ–≤–∏—Ç—å Phase2 Score –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
          
          for article in $ARTICLES; do
            phase2=$(node scripts/check-phase2.js "$article")
            if [ "$phase2" -lt 75 ]; then
              echo "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º $article (Phase2=$phase2)"
              node scripts/restore-voice.js "$article"
            fi
          done
      
      - name: Push changes
        run: |
          git add articles
          git commit -m "üîÑ Auto-restore: Phase2 quality improvement"
          git push
```

---

## üìä –ö–ê–ß–ï–°–¢–í–û –ü–û–°–õ–ï –ü–ï–†–ï–î–ï–õ–ö–ò

### –î–æ:
```
–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Phase2 Score 65
–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Phase2 Score 52
–•—É–¥—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Phase2 Score 38
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏: 10%
```

### –ü–æ—Å–ª–µ:
```
–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Phase2 Score 88
–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Phase2 Score 78
–•—É–¥—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Phase2 Score 72 (auto-restore –ø–æ–¥–Ω—è–ª)
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏: 95%
```

---

## üéØ –ü–û–î–†–û–ë–ù–û–ï –ó–ê–î–ê–ù–ò–ï –î–õ–Ø –ò–ò

### –ë–ª–æ–∫ 1: –ü—Ä–æ–º–ø—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

**–°–æ–∑–¥–∞–π —Ñ–∞–π–ª**: `prompts/stage-0-plan.md`

```markdown
# –ü—Ä–æ–º–ø—Ç –¥–ª—è STAGE 0: PlotBible Generation

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
–¢—ã —Å–æ–∑–¥–∞—ë—à—å "—Å–∫–µ–ª–µ—Ç" —Å—Ç–∞—Ç—å–∏. –≠—Ç–æ JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–∞—Å—Å–∫–∞–∑—á–∏—Ü–µ, –µ—ë –∞—Ä—Ö–µ—Ç–∏–ø–µ, —ç–ø–∏–∑–æ–¥–∞—Ö.

## –ü—Ä–∞–≤–∏–ª–∞
1. –†–∞—Å—Å–∫–∞–∑—á–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞ (–≤–æ–∑—Ä–∞—Å—Ç 25-65)
2. –í—ã–±–µ—Ä–∏ –∞—Ä—Ö–µ—Ç–∏–ø –∏–∑: Comeback Queen, Gold Digger Trap, Phoenix, ...
3. 7-12 —ç–ø–∏–∑–æ–¥–æ–≤, –∫–∞–∂–¥—ã–π —Å —è—Å–Ω—ã–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–º
4. –°–µ–Ω—Å–æ—Ä–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞: 3-5 –∑–∞–ø–∞—Ö–æ–≤, 3-5 –∑–≤—É–∫–æ–≤, 3-5 —Ç–µ–∫—Å—Ç—É—Ä

## INPUT
–¢–µ–º–∞: [–¢–ï–ú–ê –°–¢–ê–¢–¨–ò]

## OUTPUT
JSON:
{
  "topic": "...",
  "narrator": {
    "age": NUMBER (25-65),
    "gender": "female",
    "tone": "exclamatory | sad | ironic | didactic",
    "habits": ["–ø—Ä–∏–≤—ã—á–∫–∞ 1", "–ø—Ä–∏–≤—ã—á–∫–∞ 2", "–ø—Ä–∏–≤—ã—á–∫–∞ 3"]
  },
  "archetype": "Comeback Queen | Gold Digger Trap | Phoenix",
  "sensorPalette": {
    "smells": ["–∑–∞–ø–∞—Ö 1", "–∑–∞–ø–∞—Ö 2", "–∑–∞–ø–∞—Ö 3"],
    "sounds": ["–∑–≤—É–∫ 1", "–∑–≤—É–∫ 2"],
    "textures": ["—Ç–µ–∫—Å—Ç—É—Ä–∞ 1", "—Ç–µ–∫—Å—Ç—É—Ä–∞ 2"]
  },
  "episodes": [
    {
      "hook": "–í–æ–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —Ü–µ–ø–ª—è–µ—Ç?",
      "conflict": "–ö—Ç–æ –µ—ë –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫?",
      "turning_point": "–ß—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è?"
    }
    // ... 7-12 —ç–ø–∏–∑–æ–¥–æ–≤
  ]
}

## –ü—Ä–∏–º–µ—Ä—ã

–ü–†–ò–ú–ï–† 1:
INPUT: "–Ø —Ç–µ—Ä–ø–µ–ª–∞ —Å–≤–µ–∫—Ä–æ–≤—å 20 –ª–µ—Ç"
OUTPUT:
{
  "narrator": {
    "age": 45,
    "tone": "–∏—Å–ø–æ–≤–µ–¥–∞–ª—å–Ω—ã–π, –≥–æ—Ä—å–∫–∏–π",
    "habits": ["–Ø –Ω–µ —Ö–æ—Ç–µ–ª–∞, –Ω–æ...", "–ú–æ–∂–µ—Ç, —è –æ—à–∏–±–∞–ª–∞—Å—å...", "–í—Å–µ –¥—É–º–∞–ª–∏..."]
  },
  "archetype": "Comeback Queen",
  "sensorPalette": {
    "smells": ["–∫–æ—Ñ–µ", "–ø—ã–ª—å —Å—Ç–∞—Ä—ã—Ö –∫–Ω–∏–≥", "–¥—É—Ö–∏ —Å–≤–µ–∫—Ä–æ–≤–∏"],
    "sounds": ["—Ç–∏—à–∏–Ω–∞", "—Ç–∏–∫–∞—é—â–∏–µ —á–∞—Å—ã", "–≥–æ–ª–æ—Å —Å–≤–µ–∫—Ä–æ–≤–∏"]
  }
}
```

**–°–æ–∑–¥–∞–π —Ñ–∞–π–ª**: `prompts/stage-1-episodes.md`

```markdown
# –ü—Ä–æ–º–ø—Ç –¥–ª—è STAGE 1: Episode Writing

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
–¢—ã –ø–∏—à–µ—à—å –û–î–ò–ù —ç–ø–∏–∑–æ–¥ —Å—Ç–∞—Ç—å–∏. –≠—Ç–æ 3000-4000 –∑–Ω–∞–∫–æ–≤ –∂–∏–≤–æ–≥–æ, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–ø–∏–∑–æ–¥–∞
1. Hook (–∫—Ä—é—á–æ–∫): 200 –∑–Ω–∞–∫–æ–≤
   - –í–æ–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —Ü–µ–ø–ª—è–µ—Ç
   - –ü—Ä–∏–º–µ—Ä: "–ù–µ—É–∂–µ–ª–∏ —è –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –º–æ–ª—á–∞—Ç—å?"

2. External Conflict (–≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç): 800 –∑–Ω–∞–∫–æ–≤
   - –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏
   - –ß—Ç–æ —Å–∫–∞–∑–∞–ª –∞–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç

3. Internal Emotion (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —ç–º–æ—Ü–∏—è): 800 –∑–Ω–∞–∫–æ–≤
   - –ß—Ç–æ —è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞
   - –§–∏–∑–∏—á–µ—Å–∫–∏–µ –æ—â—É—â–µ–Ω–∏—è (–¥—Ä–æ–∂—å, –±–æ–ª—å)

4. Turning Point (–ø–æ–≤–æ—Ä–æ—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç): 600 –∑–Ω–∞–∫–æ–≤
   - –ß—Ç–æ —è —Ä–µ—à–∏–ª–∞ —Å–¥–µ–ª–∞—Ç—å
   - –ü–µ—Ä–≤—ã–π —à–∞–≥

5. Open Loop (–æ—Ç–∫—Ä—ã—Ç–∞—è –ø–µ—Ç–ª—è): 300 –∑–Ω–∞–∫–æ–≤
   - –ù–µ–¥–æ—Å–∫–∞–∑–∞–Ω–Ω–æ—Å—Ç—å
   - "–ù–æ —è –Ω–µ –∑–Ω–∞–ª–∞, —á—Ç–æ —Å–ª—É—á–∏—Ç—Å—è –¥–∞–ª—å—à–µ..."

## –ü—Ä–∞–≤–∏–ª–∞
1. –ò—Å–ø–æ–ª—å–∑—É–π sensorPalette (–∑–∞–ø–∞—Ö–∏, –∑–≤—É–∫–∏, —Ç–µ–∫—Å—Ç—É—Ä—ã)
2. –†–∞–∑–Ω–∞—è –¥–ª–∏–Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (–∫–æ—Ä–æ—Ç–∫–æ–µ, —Å—Ä–µ–¥–Ω–µ–µ, –¥–ª–∏–Ω–Ω–æ–µ)
3. –ù–µ–∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–∫–∞–∫ –ª—é–¥–∏ –≥–æ–≤–æ—Ä—è—Ç)
4. –ú–µ–∂–¥–æ–º–µ—Ç–∏—è (–ë–æ–∂–µ, –º–∞–º–∞, —Å–ø–∞—Å–∏—Ç–µ)
5. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å PlotBible (–≤–æ–∑—Ä–∞—Å—Ç, –∏–º–µ–Ω–∞, —Ç–æ–Ω)

## INPUT
PlotBible:
{
  "narrator": { "age": 45, "tone": "–∏—Å–ø–æ–≤–µ–¥–∞–ª—å–Ω—ã–π" },
  "episode": {
    "hook": "–í–æ–ø—Ä–æ—Å?",
    "conflict": "–°–≤–µ–∫—Ä–æ–≤—å –≥–æ–≤–æ—Ä–∏—Ç...",
    "turning_point": "–Ø —Ä–µ—à–∞—é..."
  },
  "sensorPalette": {
    "smells": ["–∫–æ—Ñ–µ", "–ø—ã–ª—å"],
    "sounds": ["—Ç–∏—à–∏–Ω–∞"]
  }
}

## OUTPUT
3000-4000 –∑–Ω–∞–∫–æ–≤ –∂–∏–≤–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —ç–ø–∏–∑–æ–¥–∞

## –ü—Ä–∏–º–µ—Ä—ã

–ü–†–ò–ú–ï–† (–ø–µ—Ä–≤—ã–µ 500 –∑–Ω–∞–∫–æ–≤):
"–ù–µ—É–∂–µ–ª–∏ —è –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –º–æ–ª—á–∞—Ç—å? –î–≤–∞–¥—Ü–∞—Ç—å –ª–µ—Ç —è –º–æ–ª—á–∞–ª–∞.

–°–≤–µ–∫—Ä–æ–≤—å –≥–æ–≤–æ—Ä–∏—Ç: '–¢—ã —Å–ª–∏—à–∫–æ–º –ø—Ä–æ—Å—Ç–∞—è, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –±–∏–∑–Ω–µ—Å.'

–í—Å–µ —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ –º–µ–Ω—è. –û–∂–∏–¥–∞—é—Ç, —á—Ç–æ —è —Å–æ–≥–ª–∞—Å—É—Å—å. –ó–∞–ø–∞—Ö –µ—ë –¥—É—Ö–æ–≤ - —Ä–æ–∑–æ–≤–æ–µ –¥–µ—Ä–µ–≤–æ, —Å–ª–∏—à–∫–æ–º —Å–ª–∞–¥–∫–æ. –ü–∞—Ö–Ω–µ—Ç –¥–µ–Ω—å–≥–∞–º–∏. –ï—ë –ø–∞–ª—å—Ü—ã –±–∞—Ä–∞–±–∞–Ω—è—Ç –ø–æ —Å—Ç–æ–ª—É - —Ç–∏–∫-—Ç–∏–∫-—Ç–∏–∫.

–ú–æ–∏ —Ä—É–∫–∏ –¥—Ä–æ–∂–∞—Ç. –ù–µ –æ—Ç —Å—Ç—Ä–∞—Ö–∞. –û—Ç –∑–ª–æ—Å—Ç–∏. –ß–∏—Å—Ç–æ–π, —Ö–æ–ª–æ–¥–Ω–æ–π –∑–ª–æ—Å—Ç–∏.

–ò –≤–æ—Ç —è —Ä–µ—à–∞—é: —è –µ–π –¥–æ–∫–∞–∂—É. –ù–µ —á–µ—Ä–µ–∑ –≥–æ–¥. –ó–∞ —Ç—Ä–∏ –º–µ—Å—è—Ü–∞."
```

**–°–æ–∑–¥–∞–π —Ñ–∞–π–ª**: `prompts/stage-2-assemble.md`

```markdown
# –ü—Ä–æ–º–ø—Ç –¥–ª—è STAGE 2: Article Assembly

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
–¢—ã —Å–æ–±–∏—Ä–∞–µ—à—å 7-12 —ç–ø–∏–∑–æ–¥–æ–≤ –≤ –û–î–ù–£ –¶–ï–õ–£–Æ —Å—Ç–∞—Ç—å—é.
–ù–ï –∫–æ–ø–∏—Ä—É–µ—à—å —ç–ø–∏–∑–æ–¥—ã. –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—à—å –∏—Ö, –¥–æ–±–∞–≤–ª—è—è –ø–µ—Ä–µ—Ö–æ–¥—ã –∏ –≥–ª—É–±–∏–Ω—É.

## –ß–∞—Å—Ç–∏ —Å—Ç–∞—Ç—å–∏

### LEDE (–Ω–∞—á–∞–ª–æ): 600-900 –∑–Ω–∞–∫–æ–≤
- –ö—Ä—é—á–æ–∫ —Å —ç–º–æ—Ü–∏–µ–π
- –ù–ï –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, –∞ –î–ï–ô–°–¢–í–ò–ï/–î–ò–ê–õ–û–ì
- –í–æ–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –¥–µ—Ä–∂–∞—Ç—å –≤ –≥–æ–ª–æ–≤–µ
- –ü—Ä–∏–º–µ—Ä: "–ú–µ–Ω—è –Ω–∞–∑—ã–≤–∞–ª–∏ —Ö—É–¥—à–µ–π –Ω–µ–≤–µ—Å—Ç–∫–æ–π. –ü—Ä–∏ –≤—Å–µ—Ö. 12 –ª–µ—Ç."

### DEVELOPMENT (—Ä–∞–∑–≤–∏—Ç–∏–µ): 1500-2000 –∑–Ω–∞–∫–æ–≤
- –ù–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è
- –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å (–Ω–µ–¥–µ–ª–∏, –º–µ—Å—è—Ü—ã)
- "–ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü...", "–ö –º–µ—Å—è—Ü—É —Ç—Ä–µ—Ç—å–µ–º—É..."

### CLIMAX (–∫—É–ª—å–º–∏–Ω–∞—Ü–∏—è): 1200-1600 –∑–Ω–∞–∫–æ–≤
- –ì–ª–∞–≤–Ω–∞—è —Å—Ü–µ–Ω–∞ –∫–æ–Ω—Ñ—Ä–æ–Ω—Ç–∞—Ü–∏–∏
- –ê–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç –í–ò–î–ò–¢ –µ—ë —É—Å–ø–µ—Ö
- –í–ò–î–ò–ú–ê–Ø —Ä–µ–∞–∫—Ü–∏—è –∞–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞ (—Ä–æ—Ç –æ—Ç–∫—Ä—ã—Ç, –¥—Ä–æ–∂–∞—Ç —Ä—É–∫–∏)
- "–ï—ë –ª–∏—Ü–æ –ø–æ–±–µ–ª–µ–ª–æ"

### RESOLUTION (—Ä–∞–∑–≤—è–∑–∫–∞): 1000-1300 –∑–Ω–∞–∫–æ–≤
- –ï—ë –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è (–¢–í–Å–†–î–û, –±–µ–∑ —Å–æ–º–Ω–µ–Ω–∏–π)
- –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è –∞–Ω—Ç–∞–≥–æ–Ω–∏—Å—Ç–∞
- "–¢–µ–ø–µ—Ä—å –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–µ–Ω—è"

### FINALE (—Ñ–∏–Ω–∞–ª): 1200-1800 –∑–Ω–∞–∫–æ–≤
- CAPS —Ñ—Ä–∞–∑–∞ —Å –ø–æ–±–µ–¥–æ–π
- "–Ø –ù–ï –ü–†–û–°–¢–û –í–´–ò–ì–†–ê–õ–ê. –Ø –°–¢–ê–õ–ê –ò–• –ö–û–†–û–õ–ï–í–û–ô."
- –í–æ–ø—Ä–æ—Å –∫ —á–∏—Ç–∞—Ç–µ–ª—é (–±–µ–∑ –æ—Ç–≤–µ—Ç–∞)
- –ú–æ—â–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

## –ü—Ä–∞–≤–∏–ª–∞
1. –ù–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç —ç–ø–∏–∑–æ–¥–æ–≤, –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å
2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å PlotBible (–∏–º–µ–Ω–∞, –≤–æ–∑—Ä–∞—Å—Ç, —Ç–æ–Ω)
3. –ü–µ—Ä–µ—Ö–æ–¥—ã –ø–ª–∞–≤–Ω—ã–µ (–Ω–µ —Å–∫–∞—á–∫–∏)
4. –ö–∞–∂–¥–∞—è —á–∞—Å—Ç—å ‚Äî –ù–û–í–û–ï —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ, –Ω–µ –∫–æ–º–ø–∏–ª—è—Ü–∏—è

## OUTPUT
15,000-25,000 –∑–Ω–∞–∫–æ–≤ –≥–æ—Ç–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏
```

**–°–æ–∑–¥–∞–π —Ñ–∞–π–ª**: `prompts/shared/voice-guidelines.md`

```markdown
# –ü—Ä–∞–≤–∏–ª–∞ –ñ–∏–≤–æ–≥–æ –ì–æ–ª–æ—Å–∞

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–µ–∫—Å—Ç –ñ–ò–í–´–ú

1. **–†–∞–∑–Ω–∞—è –¥–ª–∏–Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π**
   ‚úÖ "–ö–æ—Ä–æ—Ç–∫–æ–µ. –°—Ä–µ–¥–Ω–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –º—ã—Å–ª—å. –î–ª–∏–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç. –°–Ω–æ–≤–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ."
   ‚ùå "–Ø –±—ã–ª–∞ –≥—Ä—É—Å—Ç–Ω–∞—è. –Ø —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ –±–æ–ª—å. –Ø –¥—É–º–∞–ª–∞ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö. –Ø –ø—Ä–∏–Ω—è–ª–∞ —Ä–µ—à–µ–Ω–∏–µ."

2. **–ù–µ–∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è**
   ‚úÖ "–†—É–∫–∏ —Ç—Ä—è—Å–ª–∏—Å—å. –ú–æ–ª—á–∞–ª–∞. –ù–µ –º–æ–≥–ª–∞ –≥–æ–≤–æ—Ä–∏—Ç—å."
   ‚ùå "–ú–æ–∏ —Ä—É–∫–∏ —Ç—Ä—è—Å–ª–∏—Å—å. –Ø –º–æ–ª—á–∞–ª–∞. –Ø –Ω–µ –º–æ–≥–ª–∞ –≥–æ–≤–æ—Ä–∏—Ç—å."

3. **–ú–µ–∂–¥–æ–º–µ—Ç–∏—è –∏ –≤–æ—Å–∫–ª–∏—Ü–∞–Ω–∏—è**
   ‚úÖ "–ë–æ–∂–µ, –∫–∞–∫ —è –±—ã–ª–∞ —Å–ª–µ–ø–∞! –ú–∞–º–∞, —Å–ø–∞—Å–∏—Ç–µ!"
   ‚ùå "–Ø –æ—Å–æ–∑–Ω–∞–ª–∞ —Å–≤–æ—é –æ—à–∏–±–∫—É. –ü–æ–ø—Ä–æ—Å–∏–ª–∞ –ø–æ–º–æ—â—å."

4. **–°–µ–Ω—Å–æ—Ä–Ω—ã–µ –¥–µ—Ç–∞–ª–∏**
   ‚úÖ "–ó–∞–ø–∞—Ö –∫–æ—Ñ–µ. –•–æ–ª–æ–¥ –≤ —Å–ø–∏–Ω–µ. –¢–∏—à–∏–Ω–∞. –¢–æ–ª—å–∫–æ –µ—ë –≥–æ–ª–æ—Å."
   ‚ùå "–Ø –±—ã–ª–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ, –ø–∏–ª–∞ –∫–æ—Ñ–µ –∏ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ —Å–µ–±—è –ø–ª–æ—Ö–æ."

5. **–†–µ–∞–ª—å–Ω—ã–µ —Ä–µ—á–µ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏**
   ‚úÖ "–ò –≤–æ—Ç —è –ø–æ–Ω–∏–º–∞—é. –í–æ—Ç —Ç–æ–≥–¥–∞. –≠—Ç–æ –±—ã–ª–æ –≤ –º–∞–µ..."
   ‚ùå "–ó–∞—Ç–µ–º —è –æ—Å–æ–∑–Ω–∞–ª–∞. –≠—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ –º–µ—Å—è—Ü–µ –º–∞–π."

6. **–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã**
   ‚úÖ "–ú–µ—Å—è—Ü –Ω–∞–∑–∞–¥ —è –ø–ª–∞–∫–∞–ª–∞ –Ω–∞ –∫—É—Ö–Ω–µ. –°–µ–≥–æ–¥–Ω—è —è –Ω–∞ –∏—Ö –æ—Ñ–∏—Å–Ω–æ–π —Å—Ç–µ–Ω–µ. –í —Ä–æ—Å–∫–æ—à–Ω–æ–º –∫–æ—Å—Ç—é–º–µ."
   ‚ùå "–Ø –ø—Ä–æ—à–ª–∞ —á–µ—Ä–µ–∑ –º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞ –º–µ—Å—è—Ü."

## –ê—Ä—Ö–µ—Ç–∏–ø: –∫–∞–∫ –∑–≤—É—á–∏—Ç –∫–∞–∂–¥—ã–π

### Comeback Queen
- –ü–µ—Ä–≤–æ–±—ã—Ç–Ω–∞—è –∑–ª–æ—Å—Ç—å, –ø–æ—Ç–æ–º —Ö–æ–ª–æ–¥–Ω—ã–π —Ä–∞—Å—á–µ—Ç
- "–Ø –∏–º –¥–æ–∫–∞–∂—É."
- –ü–µ—Ä–µ–≤–æ—Ä–æ—Ç —Å—Ç–∞—Ç—É—Å–∞ = –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–º–µ–Ω—Ç
- –§–∏–Ω–∞–ª: "–¢–µ–ø–µ—Ä—å –û–ù–ò —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –ú–ï–ù–Ø"

### Gold Digger Trap
- –û–±–∏–¥–∞, –ø–æ—Ç–æ–º —Ç—Ä–∏—É–º—Ñ
- "–Ø –∏—Ö –ø–µ—Ä–µ–∏–≥—Ä–∞–ª–∞."
- –¢–µ–º–∞: –Ω–µ –ª–æ–≤—É—à–∫–∞ –≤ –±—Ä–∞–∫, –∞ –ª–æ–≤—É—à–∫–∞ –≤ –¥–µ–Ω—å–≥–∏
- –§–∏–Ω–∞–ª: "–Ø –º–æ–≥—É —É–π—Ç–∏ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç"

### Phoenix
- –ë–æ–ª—å, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è
- "–Ø –≤–æ—Å–∫—Ä–µ—Å–ª–∞."
- –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Ç–µ–ª–æ, –æ–¥–µ–∂–¥–∞, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)
- –§–∏–Ω–∞–ª: "–û–Ω —Ö–æ—Ç–µ–ª –≤–µ—Ä–Ω—É—Ç—å—Å—è. –Ø —É—à–ª–∞."
```

**–°–æ–∑–¥–∞–π —Ñ–∞–π–ª**: `prompts/shared/anti-detect.md`

```markdown
# Anti-Detection: –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å AI-–¥–µ—Ç–µ–∫—Ü–∏–∏

## –ß—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç Phase 2 –∫–∞–∫ AI:

### 1. Perplexity (60% –æ—Ü–µ–Ω–∫–∏)
–¢–µ–∫—Å—Ç –î–û–õ–ñ–ï–ù –±—ã—Ç—å –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º

‚ùå –ü–õ–û–•–û (–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ):
"–Ø –±—ã–ª–∞ –æ—á–µ–Ω—å –≥—Ä—É—Å—Ç–Ω–∞—è. –≠—Ç–æ –±—ã–ª–∞ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è. –≠—Ç–æ –±—ã–ª–æ –æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ."

‚úÖ –•–û–†–û–®–û (–Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ):
"–ì—Ä—É—Å—Ç—å. –ù–µ —Ç–∞, —á—Ç–æ –æ—Ç –ø–µ—á–∞–ª–∏. –û—Ü–µ–ø–µ–Ω–µ–Ω–∏–µ. –ë–µ–ª–∞—è, –ø—É—Å—Ç–∞—è, —Ö–æ–ª–æ–¥–Ω–∞—è."

### 2. Burstiness (15% –æ—Ü–µ–Ω–∫–∏)
–í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª–∏–Ω—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

‚ùå –ü–õ–û–•–û:
"–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ."

‚úÖ –•–û–†–û–®–û:
"Áü≠. –°—Ä–µ–¥–Ω–µ–µ. –í–æ—Ç —Ç–∞–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ –¥–ª–∏–Ω–Ω—ã–º. –ö–æ—Ä–æ—á–µ."

### 3. Colloquialism (15% –æ—Ü–µ–Ω–∫–∏)
–†–∞–∑–≥–æ–≤–æ—Ä–Ω–∞—è —Ä–µ—á—å, –∫–∞–∫ —Ä–µ–∞–ª—å–Ω—ã–π —á–µ–ª–æ–≤–µ–∫

‚ùå –ü–õ–û–•–û:
"–í–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ —è –æ—Å–æ–∑–Ω–∞–ª–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Å–≤–æ–µ–≥–æ –∑–Ω–∞–Ω–∏—è."

‚úÖ –•–û–†–û–®–û:
"–ò –≤–æ—Ç. –Ø –ø–æ–Ω—è–ª–∞, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞—é. –í–æ–æ–±—â–µ."

### 4. –ù–µ—Ç –∫–ª–∏—à–µ (10% –æ—Ü–µ–Ω–∫–∏)

‚ùå –ü–õ–û–•–û:
"–Ø –≤—ã—É—á–∏–ª–∞ –≤–∞–∂–Ω—ã–π —É—Ä–æ–∫. –ñ–∏–∑–Ω—å –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –Ω–∞–≤—Å–µ–≥–¥–∞. –≠—Ç–æ –±—ã–ª –ø–µ—Ä–µ–ª–æ–º–Ω—ã–π –º–æ–º–µ–Ω—Ç."

‚úÖ –•–û–†–û–®–û:
"–Ø –Ω–µ –≤—ã—É—á–∏–ª–∞ —É—Ä–æ–∫. –Ø –ø—Ä–æ—Å—Ç–æ —Å–±–µ–∂–∞–ª–∞. –ò —ç—Ç–æ–≥–æ –±—ã–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ."

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä—é–∫–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–π –Ω–µ–ø–æ–ª–Ω—ã–µ –º—ã—Å–ª–∏**
   - "–ú–æ–∂–µ—Ç –±—ã—Ç—å, —è..."
   - "–ù–æ –ø–æ–¥–æ–∂–¥–∏—Ç–µ..."
   - "–ò —Ç–æ–≥–¥–∞..."

2. **–ü–æ–≤—Ç–æ—Ä—è–π —Å–ª–æ–≤–∞ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ**
   - "–Ø –±—ã–ª–∞ —Å–∏–ª—å–Ω–æ–π. –ù–µ—Ç, –Ω–µ —Å–∏–ª—å–Ω–æ–π. –ó–ª–æ–π. –°–∏–ª—å–Ω–æ–π –æ—Ç –∑–ª–æ—Å—Ç–∏."

3. **–ò—Å–ø–æ–ª—å–∑—É–π —Ç–∏—Ä–µ, –∞ –Ω–µ –∑–∞–ø—è—Ç—ã–µ**
   - "–°–≤–µ–∫—Ä–æ–≤—å ‚Äî –æ–Ω–∞ –±—ã–ª–∞ –≤–µ–∑–¥–µ ‚Äî –≤ –¥–æ–º–µ, –≤ –≥–æ–ª–æ–≤–µ, –≤ —Å–µ—Ä–¥—Ü–µ."

4. **–†–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã**
   - "–ó–Ω–∞–µ—à—å, –∫–∞–∫ —ç—Ç–æ..."
   - "–ü–æ–Ω–∏–º–∞–µ—à—å..."
   - "–í–æ—Ç –∫–∞–∫-—Ç–æ..."

5. **–§–∏–∑–∏—á–µ—Å–∫–∏–µ –æ—â—É—â–µ–Ω–∏—è**
   - "–ú–æ–π –∂–µ–ª—É–¥–æ–∫. –í–Ω—É—Ç—Ä–∏ ‚Äî –≤–æ–ª–Ω—ã."
   - "–†—É–∫–∏. –ù–µ –º–æ–∏? –†—É–∫–∏ –∫–æ–≥–æ-—Ç–æ –¥—Ä—É–≥–æ–≥–æ?"
```

---

### –ë–ª–æ–∫ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —ç–ø–∏–∑–æ–¥–æ–≤

**–°–æ–∑–¥–∞–π —Ñ–∞–π–ª**: `src/utils/levenshtein-distance.ts`

```typescript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —è–≤–ª—è—é—Ç—Å—è –ª–∏ —ç–ø–∏–∑–æ–¥—ã –¥—É–±–ª—è–º–∏

export function levenshteinDistance(str1: string, str2: string): number {
  const len1 = str1.length
  const len2 = str2.length
  const matrix: number[][] = []

  for (let i = 0; i <= len2; i++) {
    matrix[i] = [i]
  }
  for (let j = 0; j <= len1; j++) {
    matrix[0][j] = j
  }

  for (let i = 1; i <= len2; i++) {
    for (let j = 1; j <= len1; j++) {
      if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
        matrix[i][j] = matrix[i - 1][j - 1]
      } else {
        matrix[i][j] = Math.min(
          matrix[i - 1][j - 1] + 1,
          matrix[i][j - 1] + 1,
          matrix[i - 1][j] + 1
        )
      }
    }
  }

  return matrix[len2][len1]
}

export function calculateSimilarity(str1: string, str2: string): number {
  const distance = levenshteinDistance(str1, str2)
  const maxLength = Math.max(str1.length, str2.length)
  return 1 - distance / maxLength
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
// const similarity = calculateSimilarity(episode1.text, episode2.text)
// if (similarity > 0.75) console.log('–î–£–ë–õ–¨!')
```

---

### –ë–ª–æ–∫ 3: Quality Gate –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

**–°–æ–∑–¥–∞–π —Ñ–∞–π–ª**: `src/utils/quality-gate.ts`

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

import { checkPhase2Score } from './phase2-checker'

export async function qualityGate(
  content: string,
  minPhase2Score: number = 70,
  minLength: number = 5000,
  context?: string
): Promise<{
  isValid: boolean
  phase2Score: number
  length: number
  issues: string[]
}> {
  const issues: string[] = []
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –î–ª–∏–Ω–∞
  if (content.length < minLength) {
    issues.push(`–°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∞—è: ${content.length}/${minLength} –∑–Ω–∞–∫–æ–≤`)
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Phase 2 Score
  const phase2Score = await checkPhase2Score(content)
  if (phase2Score < minPhase2Score) {
    issues.push(`Phase2 Score –Ω–∏–∑–∫–∏–π: ${phase2Score}/${minPhase2Score}`)
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ù–µ—Ç –∑–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  const forbidden = ['–∫–∞–∫ —è–∑—ã–∫ –º–æ–¥–µ–ª–∏', '–∫–∞–∫ AI', 'I apologize']
  for (const word of forbidden) {
    if (content.toLowerCase().includes(word.toLowerCase())) {
      issues.push(`–ù–∞–π–¥–µ–Ω AI-–º–∞—Ä–∫–µ—Ä: "${word}"`)
    }
  }
  
  return {
    isValid: issues.length === 0,
    phase2Score,
    length: content.length,
    issues
  }
}
```

---

### –ë–ª–æ–∫ 4: Auto-Restore –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

**–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª**: `src/services/stage-1/generate-episodes.ts`

```typescript
import { qualityGate } from '../../utils/quality-gate'
import { restoreVoice } from '../restore/restore-voice'

export async function generateEpisodes(plotBible: any): Promise<any[]> {
  const episodes: any[] = []
  
  for (let i = 0; i < plotBible.episodes.length; i++) {
    let episode = await generateOneEpisode(plotBible.episodes[i])
    let attempts = 0
    
    // –ü–†–û–í–ï–†–ö–ê 1: –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
    while (attempts < 3) {
      const isDuplicate = episodes.some(e => 
        calculateSimilarity(e.text, episode.text) > 0.75
      )
      
      if (isDuplicate) {
        console.log(`‚ö†Ô∏è –≠–ø–∏–∑–æ–¥ ${i} - –¥—É–±–ª—å, —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º...`)
        episode = await generateOneEpisode(plotBible.episodes[i])
        attempts++
      } else {
        break
      }
    }
    
    // –ü–†–û–í–ï–†–ö–ê 2: –ö–∞—á–µ—Å—Ç–≤–æ
    const validation = await qualityGate(episode.text, 70, 3000)
    
    if (!validation.isValid) {
      console.log(`‚ö†Ô∏è –≠–ø–∏–∑–æ–¥ ${i} - –∫–∞—á–µ—Å—Ç–≤–æ –Ω–∏–∑–∫–æ–µ:`, validation.issues)
      
      // Auto-restore:
      while (!validation.isValid && attempts < 3) {
        episode.text = await restoreVoice(episode.text, plotBible)
        validation = await qualityGate(episode.text, 70, 3000)
        attempts++
      }
    }
    
    episodes.push(episode)
  }
  
  return episodes
}
```

---

## üé¨ –î–ï–¢–ê–õ–¨–ù–û–ï –í–´–ü–û–õ–ù–ï–ù–ò–ï

### –°—Ä–æ–∫–∏ –ø–æ –±–ª–æ–∫–∞–º:

| –ë–ª–æ–∫ | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ä–µ–º—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|----------|-------|-----------|
| **A** | –í—ã–Ω–µ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç—ã –≤ /prompts | 4—á | üî¥ –ü–ï–†–í–´–ô |
| **B** | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ STAGE 0 | 2—á | üî¥ –ü–ï–†–í–´–ô |
| **C** | –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ STAGE 1 | 3—á | üî¥ –ü–ï–†–í–´–ô |
| **D** | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è STAGE 2 | 5—á | üü† –í–¢–û–†–û–ô |
| **E** | –£–±—Ä–∞—Ç—å cleanup, –æ—Å—Ç–∞–≤–∏—Ç—å auto-restore | 2—á | üü† –í–¢–û–†–û–ô |

**–í—Å–µ–≥–æ**: 16 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã

---

## üìã –ü–†–û–í–ï–†–ö–ê –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ALL –±–ª–æ–∫–æ–≤:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –ø—Ä–æ–º–ø—Ç—ã –≤ /prompts
ls -la prompts/

# 2. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç–∞—Ç—å—é
npm run both --count=1 --topic="Test topic"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Phase2 Score
cat articles/*/latest.md | grep phase2_score

# 4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Score >= 75
npm run validate

# 5. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 5 —Å—Ç–∞—Ç–µ–π, –≤—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å >= 70
npm run factory --count=5
```

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

```
‚úÖ –í—Å–µ –ø—Ä–æ–º–ø—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ /prompts
‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –Ω–µ –ø–∞–¥–∞–µ—Ç (graceful fallback —Ä–∞–±–æ—Ç–∞–µ—Ç)
‚úÖ –î—É–±–ª–∏ —ç–ø–∏–∑–æ–¥–æ–≤ —É–¥–∞–ª—è—é—Ç—Å—è (Levenshtein > 0.75)
‚úÖ Quality gate —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
‚úÖ Phase2 Score 75+ –Ω–∞ –≤—Å–µ—Ö —Å—Ç–∞—Ç—å—è—Ö
‚úÖ Auto-restore –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—å–∏ –Ω–æ—á—å—é
‚úÖ –ù–µ—Ç cleanup-—Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ (—É–¥–∞–ª–µ–Ω—ã)
```

---

## ‚ö° –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –î–õ–Ø –£–°–ü–ï–•–ê

1. **–ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π Quality Gate** - –µ—Å–ª–∏ Phase2 < 70, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π, –Ω–µ –ø—É–±–ª–∏–∫—É–π
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π PlotBible** - –≤—Å–µ —á–∞—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ PlotBible
3. **–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–π –≤ STAGE 2** - –Ω–µ –∫–æ–ø–∏—Ä—É–π –∏–∑ —ç–ø–∏–∑–æ–¥–æ–≤
4. **Auto-Restore –∫–∞–∂–¥—É—é –Ω–æ—á—å** - —ç—Ç–æ —Ç–≤–æ—è —Å–ø–∞—Å–∞—Ü–∏—è –¥–ª—è –Ω–∏–∑–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
5. **–ü—Ä–æ–º–ø—Ç—ã –∏–∑ —Ñ–∞–π–ª–æ–≤** - –æ–¥–Ω–∞ –≤–µ—Ä—Å–∏—è –∏—Å—Ç–∏–Ω—ã, –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –µ—ë –∏—Å–ø–æ–ª—å–∑—É—é—Ç

---

**–í—ã–ø–æ–ª–Ω–∏ –í–°–ï –±–ª–æ–∫–∏ –ê-–ï –ø–æ –ø–æ—Ä—è–¥–∫—É. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —á–∞—Å—ã.** ‚è∞